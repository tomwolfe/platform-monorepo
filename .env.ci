# ═══════════════════════════════════════════════════════════════════
# CI TEST ENVIRONMENT
# For running GitHub Actions tests locally using Apple's container runtime
# ═══════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────
# Database (Local PostgreSQL via Apple Container)
# ───────────────────────────────────────────────────────────────────
DATABASE_URL=postgresql://apps:apps@localhost:5432/apps

# ───────────────────────────────────────────────────────────────────
# Redis (Local Redis via Apple Container)
# ───────────────────────────────────────────────────────────────────
UPSTASH_REDIS_REST_URL=http://localhost:6379
UPSTASH_REDIS_REST_TOKEN=apps

# ───────────────────────────────────────────────────────────────────
# QStash (Local Redis Streams Emulator via Apple Container)
# ───────────────────────────────────────────────────────────────────
QSTASH_URL=http://localhost:6380
QSTASH_TOKEN=apps
UPSTASH_QSTASH_TOKEN=apps
QSTASH_CURRENT_SIGNING_KEY=local_signing_key_not_for_production
QSTASH_NEXT_SIGNING_KEY=local_next_signing_key_not_for_production

# ───────────────────────────────────────────────────────────────────
# Ably (Local Ably Emulator)
# ───────────────────────────────────────────────────────────────────
ABLY_API_KEY=local:appkey
ABLY_REST_HOST=localhost
ABLY_REALTIME_HOST=localhost
ABLY_REST_PORT=5000
ABLY_REALTIME_PORT=5000
ABLY_TLS=false

# ───────────────────────────────────────────────────────────────────
# Clerk (Authentication - Test Keys)
# ───────────────────────────────────────────────────────────────────
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_Y2xlcmsuZXhhbXBsZS5jb20k
CLERK_SECRET_KEY=sk_test_Y2xlcmsuZXhhbXBsZS5jb20k

# ───────────────────────────────────────────────────────────────────
# Inter-service Communication (Local)
# ───────────────────────────────────────────────────────────────────
INTENTION_ENGINE_WEBHOOK_URL=http://localhost:3000/api/webhooks
OPENDELIVER_API_URL=http://localhost:3001/api
TABLESTACK_API_URL=http://localhost:3002/api/v1

# ───────────────────────────────────────────────────────────────────
# Internal System Security
# ───────────────────────────────────────────────────────────────────
INTERNAL_SYSTEM_KEY=ci-test-internal-key-change-in-production
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ───────────────────────────────────────────────────────────────────
# LLM Configuration (Test Mode)
# ───────────────────────────────────────────────────────────────────
LLM_API_KEY=test_llm_key
LLM_BASE_URL=http://localhost:9999
LLM_MODEL=test-model

# ───────────────────────────────────────────────────────────────────
# HuggingFace API (Test Mode)
# ───────────────────────────────────────────────────────────────────
HUGGINGFACE_API_KEY=test_huggingface_key
HUGGINGFACE_MODEL_URL=https://api-inference.huggingface.co/models/sentence-transformers/all-MiniLM-L6-v2

# ───────────────────────────────────────────────────────────────────
# Resend (Email - Test Mode)
# ───────────────────────────────────────────────────────────────────
RESEND_API_KEY=re_ci_test_key

# ───────────────────────────────────────────────────────────────────
# OpenTelemetry (Local)
# ───────────────────────────────────────────────────────────────────
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=apps-monorepo
OTEL_RESOURCE_ATTRIBUTES=deployment.environment=ci-test

# ───────────────────────────────────────────────────────────────────
# Feature Flags for CI Tests
# ───────────────────────────────────────────────────────────────────
USE_LOCAL_REDIS=true
USE_LOCAL_POSTGRES=true
USE_LOCAL_QSTASH=true
USE_LOCAL_ABLY=true
USE_LOCAL_OTEL=true

# ───────────────────────────────────────────────────────────────────
# Rate Limiting (CI Tests)
# ───────────────────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=10000
