# ═══════════════════════════════════════════════════════════════════
# LOCAL DEVELOPMENT ENVIRONMENT
# Copy this file to .env.local for local development
# Run: cp .env.local.example .env.local
# ═══════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────
# Database (Local PostgreSQL via Docker)
# ───────────────────────────────────────────────────────────────────
DATABASE_URL=postgresql://apps:apps@localhost:5432/apps

# ───────────────────────────────────────────────────────────────────
# Redis (Local Redis via Docker)
# ───────────────────────────────────────────────────────────────────
UPSTASH_REDIS_REST_URL=http://localhost:6379
UPSTASH_REDIS_REST_TOKEN=apps

# ───────────────────────────────────────────────────────────────────
# QStash (Local Redis Streams Emulator via Docker)
# Note: Using Redis Streams as QStash-compatible local alternative
# ───────────────────────────────────────────────────────────────────
QSTASH_URL=http://localhost:6380
QSTASH_TOKEN=apps
UPSTASH_QSTASH_TOKEN=apps
QSTASH_CURRENT_SIGNING_KEY=local_signing_key_not_for_production
QSTASH_NEXT_SIGNING_KEY=local_next_signing_key_not_for_production

# ───────────────────────────────────────────────────────────────────
# Ably (Local Ably Emulator via Docker)
# For production, use real Ably cloud service
# ───────────────────────────────────────────────────────────────────
ABLY_API_KEY=local:appkey
ABLY_REST_HOST=localhost
ABLY_REALTIME_HOST=localhost
ABLY_REST_PORT=5000
ABLY_REALTIME_PORT=5000
ABLY_TLS=false

# ───────────────────────────────────────────────────────────────────
# Clerk (Authentication)
# Use Clerk test mode for local development
# Get test keys from: https://dashboard.clerk.com > API Keys
# ───────────────────────────────────────────────────────────────────
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your_test_key_here
CLERK_SECRET_KEY=sk_test_your_test_secret_here

# ───────────────────────────────────────────────────────────────────
# Inter-service Communication (Local)
# ───────────────────────────────────────────────────────────────────
INTENTION_ENGINE_WEBHOOK_URL=http://localhost:3000/api/webhooks
OPENDELIVER_API_URL=http://localhost:3001/api
TABLESTACK_API_URL=http://localhost:3002/api/v1

# ───────────────────────────────────────────────────────────────────
# Internal System Security
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# ───────────────────────────────────────────────────────────────────
INTERNAL_SYSTEM_KEY=local_internal_key_not_for_production_1234567890abcdef
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ───────────────────────────────────────────────────────────────────
# LLM Configuration
# Use free tier or local LLM for development
# ───────────────────────────────────────────────────────────────────
LLM_API_KEY=your_llm_api_key_here
LLM_BASE_URL=https://api.z.ai/api/paas/v4
LLM_MODEL=glm-4.7-flash

# ───────────────────────────────────────────────────────────────────
# HuggingFace API (Semantic Memory Embeddings)
# Get free API key from: https://huggingface.co/settings/tokens
# ───────────────────────────────────────────────────────────────────
HUGGINGFACE_API_KEY=your_huggingface_token_here
HUGGINGFACE_MODEL_URL=https://api-inference.huggingface.co/models/sentence-transformers/all-MiniLM-L6-v2

# ───────────────────────────────────────────────────────────────────
# Resend (Email - Use test mode locally)
# Get test API key from: https://resend.com/api-keys
# ───────────────────────────────────────────────────────────────────
RESEND_API_KEY=re_test_your_test_key_here

# ───────────────────────────────────────────────────────────────────
# OpenTelemetry (Local Tempo via Docker)
# ───────────────────────────────────────────────────────────────────
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=apps-monorepo
OTEL_RESOURCE_ATTRIBUTES=deployment.environment=local

# ───────────────────────────────────────────────────────────────────
# Feature Flags for Local Development
# ───────────────────────────────────────────────────────────────────
# Use local emulators instead of cloud services
USE_LOCAL_REDIS=true
USE_LOCAL_POSTGRES=true
USE_LOCAL_QSTASH=true
USE_LOCAL_ABLY=true
USE_LOCAL_OTEL=true

# ───────────────────────────────────────────────────────────────────
# Rate Limiting (Local Development)
# Relaxed limits for development
# ───────────────────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000
